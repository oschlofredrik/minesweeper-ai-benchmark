<!DOCTYPE html>
<html>
<head>
    <title>Simple Models Test</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        select { padding: 5px; margin: 10px; min-width: 200px; }
        pre { background: #f5f5f5; padding: 10px; }
    </style>
</head>
<body>
    <h1>Simple Models Test - Direct API Call</h1>
    
    <div>
        <label>Provider:</label>
        <select id="provider" onchange="loadModels()">
            <option value="openai">OpenAI</option>
            <option value="anthropic">Anthropic</option>
        </select>
    </div>
    
    <div>
        <label>Model:</label>
        <select id="models">
            <option>Select provider first...</option>
        </select>
    </div>
    
    <h2>API Response:</h2>
    <pre id="response">No data yet...</pre>
    
    <script>
        async function loadModels() {
            const provider = document.getElementById('provider').value;
            const modelsSelect = document.getElementById('models');
            const responseDiv = document.getElementById('response');
            
            console.log(`Loading models for ${provider}...`);
            modelsSelect.innerHTML = '<option>Loading...</option>';
            
            try {
                const response = await fetch(`/api/models/${provider}`);
                const data = await response.json();
                
                // Show full response
                responseDiv.textContent = JSON.stringify(data, null, 2);
                
                // Clear select
                modelsSelect.innerHTML = '';
                
                // Add models
                const models = data.models || {};
                let count = 0;
                for (const [modelId, modelInfo] of Object.entries(models)) {
                    const option = document.createElement('option');
                    option.value = modelId;
                    option.textContent = modelInfo.name || modelId;
                    modelsSelect.appendChild(option);
                    count++;
                }
                
                console.log(`Added ${count} models`);
                
            } catch (error) {
                responseDiv.textContent = `Error: ${error.message}`;
                modelsSelect.innerHTML = '<option>Error loading models</option>';
            }
        }
        
        // Load on page load
        loadModels();
    </script>
</body>
</html>