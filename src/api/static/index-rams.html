<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Minesweeper AI Benchmark</title>
    <link rel="stylesheet" href="/static/rams-design.css" />
    <link rel="stylesheet" href="/static/event-stream.css" />
  </head>
  <body>
    <div class="layout">
      <!-- Header -->
      <header class="header">
        <h1 style="font-size: var(--text-base); font-weight: 500; margin: 0">
          Minesweeper AI Benchmark
        </h1>
      </header>

      <!-- Sidebar Navigation -->
      <aside class="sidebar">
        <nav>
          <ul class="nav">
            <li class="nav-item">
              <a href="#overview" class="nav-link active">Overview</a>
            </li>
            <li class="nav-item">
              <a href="#play" class="nav-link">Play</a>
            </li>
            <li class="nav-item">
              <a href="#leaderboard" class="nav-link">Leaderboard</a>
            </li>
            <li class="nav-item">
              <a href="#documentation" class="nav-link">Documentation</a>
            </li>
          </ul>
        </nav>

        <div class="mt-4">
          <h4 class="text-sm text-muted">Active Games</h4>
          <div id="active-games-sidebar">
            <p class="text-sm text-muted">No active games</p>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main">
        <!-- Overview Section -->
        <section id="overview" class="section">
          <div class="grid grid-cols-3 mb-4">
            <div class="card">
              <div class="metric">
                <div class="metric-label">Total Evaluations</div>
                <div class="metric-value" id="total-evaluations">0</div>
              </div>
            </div>
            <div class="card">
              <div class="metric">
                <div class="metric-label">Models Tested</div>
                <div class="metric-value" id="models-tested">0</div>
              </div>
            </div>
            <div class="card">
              <div class="metric">
                <div class="metric-label">Best Win Rate</div>
                <div class="metric-value" id="best-win-rate">0%</div>
              </div>
            </div>
          </div>

          <div class="card">
            <h3>About</h3>
            <p class="text-muted">
              A comprehensive benchmark platform for evaluating Large Language
              Models on strategic reasoning tasks through expert-level
              Minesweeper gameplay.
            </p>
            <p class="text-muted">
              Models must demonstrate logical deduction, pattern recognition,
              and strategic planning to succeed at this challenging task.
            </p>
          </div>
        </section>

        <!-- Play Section -->
        <section id="play" class="section" style="display: none">
          <div
            class="grid"
            style="grid-template-columns: 1fr 380px; gap: calc(var(--unit) * 4)"
          >
            <!-- Game Configuration -->
            <div>
              <h2>New Evaluation</h2>

              <form id="play-form">
                <div class="form-group">
                  <label class="label" for="model-provider"
                    >Model Provider</label
                  >
                  <select class="select" id="model-provider" required>
                    <option value="openai">OpenAI</option>
                    <option value="anthropic">Anthropic</option>
                  </select>
                </div>

                <div class="form-group">
                  <label class="label" for="model-name">Model Name</label>
                  <select class="select" id="model-name" required>
                    <!-- Options populated by JavaScript -->
                  </select>
                </div>

                <div class="form-group">
                  <label class="label" for="num-games">Number of Games</label>
                  <input
                    type="number"
                    class="input"
                    id="num-games"
                    min="1"
                    max="100"
                    value="10"
                    required
                  />
                </div>

                <div class="form-group">
                  <label class="label" for="difficulty">Difficulty</label>
                  <select class="select" id="difficulty">
                    <option value="">Auto</option>
                    <option value="beginner">Beginner (9×9, 10 mines)</option>
                    <option value="intermediate">
                      Intermediate (16×16, 40 mines)
                    </option>
                    <option value="expert">Expert (16×30, 99 mines)</option>
                  </select>
                </div>

                <button type="submit" class="button">Start Evaluation</button>
              </form>

              <div id="play-status" class="mt-3"></div>
            </div>

            <!-- Game Events -->
            <div
              class="card"
              style="height: 80vh; display: flex; flex-direction: column"
            >
              <div id="event-stream-ui" style="flex: 1;">
                <!-- Event stream UI will be initialized here -->
              </div>
            </div>
          </div>
        </section>

        <!-- Leaderboard Section -->
        <section id="leaderboard" class="section" style="display: none">
          <div class="mb-3">
            <h2>Leaderboard</h2>
            <div class="text-sm text-muted mb-3">
              Ranking models by composite performance across all metrics
            </div>
          </div>

          <table class="table">
            <thead>
              <tr>
                <th style="width: 60px">Rank</th>
                <th>Model</th>
                <th style="width: 80px">Global</th>
                <th style="width: 80px">MS-S</th>
                <th style="width: 80px">MS-I</th>
                <th style="width: 80px">Win Rate</th>
                <th style="width: 80px">Reasoning</th>
                <th style="width: 60px">Games</th>
              </tr>
            </thead>
            <tbody id="leaderboard-body">
              <tr>
                <td colspan="8" class="text-center text-muted">Loading...</td>
              </tr>
            </tbody>
          </table>
        </section>

        <!-- Documentation Section -->
        <section id="documentation" class="section" style="display: none">
          <h2>Documentation</h2>

          <div class="card">
            <h3>API Reference</h3>
            <p class="text-muted">
              View the interactive API documentation at
              <a href="/docs">/docs</a>
            </p>
          </div>

          <div class="card">
            <h3>Evaluation Metrics</h3>
            <dl>
              <dt class="metric-label">Win Rate</dt>
              <dd class="mb-3 text-muted">Percentage of games won</dd>

              <dt class="metric-label">Valid Move Rate</dt>
              <dd class="mb-3 text-muted">Percentage of legal moves made</dd>

              <dt class="metric-label">Strategic Score</dt>
              <dd class="mb-3 text-muted">
                Composite score based on gameplay quality
              </dd>
            </dl>
          </div>
        </section>
      </main>
    </div>
    
    <!-- Admin Button -->
    <a href="/admin" class="admin-button" title="Admin Panel">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M6.5 2.5L7.5 0.5H8.5L9.5 2.5L11.5 3L12 4L10.5 5.5L10 7.5V8.5L8 9.5L6 8.5V7.5L5.5 5.5L4 4L4.5 3L6.5 2.5Z" stroke="currentColor" stroke-width="1"/>
        <path d="M3 13.5H13M3 11H13" stroke="currentColor" stroke-width="1"/>
      </svg>
    </a>
    
    <style>
      .admin-button {
        position: fixed;
        bottom: calc(var(--unit) * 2);
        right: calc(var(--unit) * 2);
        width: calc(var(--unit) * 8);
        height: calc(var(--unit) * 8);
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--bg-primary);
        border: 1px solid var(--border);
        color: var(--text-secondary);
        text-decoration: none;
        transition: all var(--transition);
        opacity: 0.6;
      }
      
      .admin-button:hover {
        opacity: 1;
        color: var(--text-primary);
        border-color: var(--text-primary);
      }
    </style>

    <script src="/static/event-stream.js"></script>
    <script src="/static/app-rams.js"></script>
  </body>
</html>
